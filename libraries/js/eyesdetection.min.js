!function(){let f=null;const g=3e3,s=5e3;let o=0;const i=[],r=4,c=3e4;function w(e,t,a){if(Date.now()-o>s&&(o=Date.now(),a({status:e,data:t}),"eyesnotopen"===e)){e=Date.now();i.push(e);for(var n=Date.now();i.length&&n-i[0]>c;)i.shift();i.length>r&&a({status:"eyecheckoff",data:t})}}window.setupFaceMesh=async function(t,m,a,e,y){const d=m.getContext("2d");for(var n=t;0===n.videoWidth||0===n.videoHeight;)await new Promise(e=>setTimeout(e,100));await 0,a.setOptions({maxNumFaces:5,refineLandmarks:!0}),a.onResults(e=>{d.save(),d.clearRect(0,0,m.width,m.height),d.drawImage(e.image,0,0,m.width,m.height);var t,a,n=m.toDataURL("image/png"),s={status:"",data:n};if(1===e.multiFaceLandmarks?.length){e=e.multiFaceLandmarks[0];t=n,a=y,r=(u=e)[159],h=u[145],c=u[386],o=u[374],i=u[234],l=u[454],u=u[1],r&&h&&c&&o&&i&&l&&u?(i=Math.abs(r.y-h.y),l=Math.abs(c.y-o.y),h=i<.015&&l<.015,r.y,c.y,u.y,h&&!f?f=setTimeout(()=>{w("eyesnotopen",t,a),f=null},g):!h&&f&&(clearTimeout(f),f=null)):w("eyesnotopen",t,a);var o=n,i=y,r=(l=e)[468],c=l[133],u=l[33],h=l[159],l=l[145];if(r&&c&&u&&h&&l){r=(r.x-c.x)/(u.x-c.x);h.y,l.y;let e="center";r<.3?e="left":.7<r&&(e="right"),"center"!==e&&w("eyesnotopen",o,i)}}d.restore(),y(s)}),async function e(){await a.send({image:t}),requestAnimationFrame(e)}()}}();