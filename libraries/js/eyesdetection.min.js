!function(){let d=null;const w=3e3,o=5e3;let s=0;const i=[],c=9,l=6e4;function p(e,t,a){if(Date.now()-s>o&&(s=Date.now(),a({status:e,data:t}),"eyesnotopen"===e)){e=Date.now();i.push(e);for(var n=Date.now();i.length&&n-i[0]>l;)i.shift();i.length>c&&(console.log("hey"),a({status:"eyecheckoff",data:t}))}}window.setupFaceMesh=async function(t,m,a,y,f){const g=m.getContext("2d");for(var e=t;0===e.videoWidth||0===e.videoHeight;)await new Promise(e=>setTimeout(e,100));await 0,a.setOptions({maxNumFaces:5,refineLandmarks:!0}),a.onResults(e=>{g.save(),g.clearRect(0,0,m.width,m.height),g.drawImage(e.image,0,0,m.width,m.height);var t,a,n=m.toDataURL("image/png"),o={status:"",data:n};if(1===e.multiFaceLandmarks?.length){var e=e.multiFaceLandmarks[0],s=JSON.parse(localStorage.getItem("eyecheckoff"))||!1;if(!s&&(null===y||1===y)){t=n,a=f,l=(s=e)[159],u=s[145],r=s[386],i=s[374],c=s[234],h=s[454],s=s[1],l&&u&&r&&i&&c&&h&&s?(c=Math.abs(l.y-u.y),h=Math.abs(r.y-i.y),u=c<.015&&h<.015,l.y,r.y,s.y,u&&!d?d=setTimeout(()=>{p("eyesnotopen",t,a),d=null},w):!u&&d&&(clearTimeout(d),d=null)):p("eyesnotopen",t,a);var i=n,c=f,l=(h=e)[468],r=h[133],s=h[33],u=h[159],h=h[145];if(l&&r&&s&&u&&h){l=(l.x-r.x)/(s.x-r.x);u.y,h.y;let e="center";l<.3?e="left":.7<l&&(e="right"),"center"!==e&&p("eyesnotopen",i,c)}}}g.restore(),f(o)}),async function e(){await a.send({image:t}),requestAnimationFrame(e)}()}}();