(function(){let f=null;let m=null;let d="Open";let r=null;const g=1e3;const h=4e3;let c=Date.now();function t(t,a,l){const e=document.getElementById("video");const o=document.getElementById("canvas");const i=o.getContext("2d");t.setOptions({maxNumFaces:5,refineLandmarks:true});t.onResults(t=>{i.save();i.clearRect(0,0,o.width,o.height);i.drawImage(t.image,0,0,o.width,o.height);let e=o.toDataURL("image/png");const n=Date.now();let s={status:"",data:e};if(n-c>=5e3){if(!t.multiFaceLandmarks){s.status="noface"}else if(t.multiFaceLandmarks.length>1){s.status="multiface"}c=n}if(a===1&&t.multiFaceLandmarks?.length===1){t.multiFaceLandmarks.forEach(t=>{u(t,e,l);w(t,e,l)})}i.restore();l(s)});async function n(){await t.send({image:e})}setInterval(n,500)}function u(t,e,n){const s=t[33];const a=t[263];const l=t[1];const o=(s.x+a.x)/2;const i=l.x;let c="Center";let u={status:"",data:e};if(i<o-.02){c="Right"}else if(i>o+.02){c="Left"}if(c!==f){f=c;if(m){clearTimeout(m);m=null}}if(f!=="Center"){if(!m){m=setTimeout(()=>{u.status=""+f+"";n(u)},g)}}else{if(m){clearTimeout(m);m=null}}}function w(t,e,n){const s=t[159];const a=t[145];const l=t[386];const o=t[374];const i=Math.abs(s.y-a.y);const c=Math.abs(l.y-o.y);const u=.018;let f=i>u&&c>u?"Open":"Closed";if(f!==d){d=f;if(r){clearTimeout(r);r=null}}let m={status:"",data:e};if(d==="Closed"){if(!r){r=setTimeout(()=>{m.status="eyesnotopen";n(m)},h)}}else{if(r){clearTimeout(r);r=null}}}window.setupFaceMesh=t})();