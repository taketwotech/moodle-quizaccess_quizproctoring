!function(){let t=null;const e=3e3,n=5e3;let a=0;const o=[],s=9,i=6e4;function c(t,e,c){if(Date.now()-a>n&&(a=Date.now(),c({status:t,data:e}),"eyesnotopen"===t)){const t=Date.now();o.push(t),function(){const t=Date.now();for(;o.length&&t-o[0]>i;)o.shift()}(),o.length>s&&c({status:"eyecheckoff",data:e})}}window.setupFaceMesh=async function(n,a,o,s,i){const u=a.getContext("2d");await async function(t){for(;0===t.videoWidth||0===t.videoHeight;)await new Promise(t=>setTimeout(t,100))}(n),o.setOptions({maxNumFaces:5,refineLandmarks:!0}),o.onResults(n=>{u.save(),u.clearRect(0,0,a.width,a.height),u.drawImage(n.image,0,0,a.width,a.height);const o=a.toDataURL("image/png");let l={status:"",data:o};if(n.multiFaceLandmarks&&1===n.multiFaceLandmarks.length){const a=n.multiFaceLandmarks[0];JSON.parse(localStorage.getItem("eyecheckoff"))||null!==s&&1!==s||function(n,a,o){const s=n[159],i=n[145],u=n[386],l=n[374],r=n[234],f=n[454],m=n[1];if(!(s&&i&&u&&l&&r&&f&&m))return void c("eyesnotopen",a,o);const y=Math.abs(s.y-i.y),h=Math.abs(u.y-l.y),d=y<.015&&h<.015;s.y,u.y;m.y,d&&!t?t=setTimeout(()=>{c("eyesnotopen",a,o),t=null},e):!d&&t&&(clearTimeout(t),t=null)}(a,o,i),function(t,e,n){const a=t[468],o=t[133],s=t[33],i=t[159],u=t[145];if(!(a&&o&&s&&i&&u))return;const l=(a.x-o.x)/(s.x-o.x);a.y,i.y,u.y,i.y;let r="center";l<.3?r="left":l>.7&&(r="right"),"center"!==r&&c("eyesnotopen",e,n)}(a,o,i)}u.restore(),i(l)}),async function t(){await o.send({image:n}),requestAnimationFrame(t)}()}}();