{"version":3,"file":"report.min.js","sources":["../src/report.js"],"sourcesContent":["define(['jquery', 'core/modal_factory', 'core/modal_events', 'core/templates', 'core/str', 'core/notification'],\r\nfunction($, ModalFactory, ModalEvents, Templates, str, notification) {\r\n    return {\r\n        init: function() {\r\n            $(document).ready(function() {\r\n                if (typeof lightbox !== 'undefined') {\r\n                    // eslint-disable-next-line no-undef\r\n                    lightbox.init();\r\n                }\r\n            });\r\n            $('#proctoringreporttable').on('click', '.delete-icon', function(event) {\r\n                event.preventDefault();\r\n                var username = $(this).data('username');\r\n                var cmid = $(this).data('cmid');\r\n                var quizid = $(this).data('quizid');\r\n                var userid = $(this).data('userid');\r\n                var newUrl = M.cfg.wwwroot + '/mod/quiz/accessrule/quizproctoring/proctoringreport.php?delete='\r\n                + userid + '&cmid=' + cmid + '&quizid=' + quizid;\r\n                Promise.all([\r\n                    str.get_string('deleteallimagesuser', 'quizaccess_quizproctoring', username),\r\n                    str.get_string('confirmation', 'quizaccess_quizproctoring'),\r\n                    str.get_string('deleteallimages', 'quizaccess_quizproctoring'),\r\n                    str.get_string('delete', 'moodle'),\r\n                    str.get_string('cancel', 'moodle'),\r\n                ]).then(function(strings) {\r\n                    var message = strings[0];\r\n                    var title = strings[1];\r\n                    var checkboxtext = strings[2];\r\n                    var deleteLabel = strings[3];\r\n                    var cancelLabel = strings[4];\r\n                    var checkboxHtml = '<div><input type=\"checkbox\" id=\"deleteallimages\" /><label class=\"deleteall\">'\r\n                    + checkboxtext + '</label></div>';\r\n                    notification.confirm(\r\n                        title,\r\n                        message + checkboxHtml,\r\n                        deleteLabel,\r\n                        cancelLabel,\r\n                        function() {\r\n                            var allImages = $('#deleteallimages').is(':checked');\r\n                            if (allImages) {\r\n                                newUrl += '&all=true';\r\n                                window.location.href = newUrl;\r\n                            }\r\n                        },\r\n                        function() {\r\n                            // Do nothing on 'Cancel'.\r\n                            return;\r\n                        }\r\n                    );\r\n                    setTimeout(function() {\r\n                        $('.modal-footer').addClass('deletenotifbtn');\r\n                        var deleteButton = $('.modal-footer button[data-action=\"save\"]');\r\n                        deleteButton.prop('disabled', true);\r\n                        $(document).off('change', '#deleteallimages').on('change', '#deleteallimages', function() {\r\n                            deleteButton.prop('disabled', !$(this).is(':checked'));\r\n                        });\r\n                    }, 300);\r\n                    return undefined;\r\n                })\r\n                .catch(function() {\r\n                    // Error logging disabled.\r\n                });\r\n            });\r\n\r\n            $('#proctoringreporttable').on('click', '.delete-aicon', function(event) {\r\n                event.preventDefault();\r\n                var username = $(this).data('username');\r\n                var cmid = $(this).data('cmid');\r\n                var quizid = $(this).data('quizid');\r\n                var userid = $(this).data('userid');\r\n                var newUrl = M.cfg.wwwroot + '/mod/quiz/accessrule/quizproctoring/proctoringreport.php?deleteaudio='\r\n                + userid + '&cmid=' + cmid + '&quizid=' + quizid;\r\n                Promise.all([\r\n                    str.get_string('deleteallaudiosuser', 'quizaccess_quizproctoring', username),\r\n                    str.get_string('confirmation', 'quizaccess_quizproctoring'),\r\n                    str.get_string('deleteallaudios', 'quizaccess_quizproctoring'),\r\n                    str.get_string('delete', 'moodle'),\r\n                    str.get_string('cancel', 'moodle'),\r\n                ]).then(function(strings) {\r\n                    var message = strings[0];\r\n                    var title = strings[1];\r\n                    var checkboxtext = strings[2];\r\n                    var deleteLabel = strings[3];\r\n                    var cancelLabel = strings[4];\r\n                    var checkboxHtml = '<div><input type=\"checkbox\" id=\"deleteallaudios\" /><label class=\"deleteall\">'\r\n                    + checkboxtext + '</label></div>';\r\n                    notification.confirm(\r\n                        title,\r\n                        message + checkboxHtml,\r\n                        deleteLabel,\r\n                        cancelLabel,\r\n                        function() {\r\n                            var allaudioss = $('#deleteallaudios').is(':checked');\r\n                            if (allaudioss) {\r\n                                newUrl += '&all=true';\r\n                                window.location.href = newUrl;\r\n                            }\r\n                        },\r\n                        function() {\r\n                            // Do nothing on 'Cancel'.\r\n                            return;\r\n                        }\r\n                    );\r\n                    setTimeout(function() {\r\n                        $('.modal-footer').addClass('deletenotifbtn');\r\n                        var deleteButton = $('.modal-footer button[data-action=\"save\"]');\r\n                        deleteButton.prop('disabled', true);\r\n                        $(document).off('change', '#deleteallaudios').on('change', '#deleteallaudios', function() {\r\n                            deleteButton.prop('disabled', !$(this).is(':checked'));\r\n                        });\r\n                    }, 300);\r\n                    return undefined;\r\n                })\r\n                .catch(function() {\r\n                    // Error logging disabled.\r\n                });\r\n            });\r\n\r\n            $('.delete-quiz').on('click', function(event) {\r\n                event.preventDefault();\r\n                var quizname = $(this).data('quiz');\r\n                var cmid = $(this).data('cmid');\r\n                var quizid = $(this).data('quizid');\r\n                var newUrl = M.cfg.wwwroot + '/mod/quiz/accessrule/quizproctoring/imagesreport.php?cmid='\r\n                + cmid + '&delete=' + quizid;\r\n                Promise.all([\r\n                    str.get_string('deleteallimagesquiz', 'quizaccess_quizproctoring', quizname),\r\n                    str.get_string('confirmation', 'quizaccess_quizproctoring'),\r\n                    str.get_string('deleteallimages', 'quizaccess_quizproctoring'),\r\n                    str.get_string('delete', 'moodle'),\r\n                    str.get_string('cancel', 'moodle'),\r\n                ]).then(function(strings) {\r\n                    var message = strings[0];\r\n                    var title = strings[1];\r\n                    var checkboxtext = strings[2];\r\n                    var deleteLabel = strings[3];\r\n                    var cancelLabel = strings[4];\r\n                    var checkboxHtml = '<div><input type=\"checkbox\" id=\"deleteallimage\" /><label class=\"deleteall\">'\r\n                    + checkboxtext + '</label></div>';\r\n                    notification.confirm(\r\n                        title,\r\n                        message + checkboxHtml,\r\n                        deleteLabel,\r\n                        cancelLabel,\r\n                        function() {\r\n                            var allImages = $('#deleteallimage').is(':checked');\r\n                            if (allImages) {\r\n                                newUrl += '&all=true';\r\n                                window.location.href = newUrl;\r\n                            }\r\n                        },\r\n                        function() {\r\n                            // Do nothing on 'Cancel'.\r\n                            return;\r\n                        }\r\n                    );\r\n                    setTimeout(function() {\r\n                        $('.modal-footer').addClass('deletenotifbtn');\r\n                        var deleteButton = $('.modal-footer button[data-action=\"save\"]');\r\n                        deleteButton.prop('disabled', true);\r\n                        $(document).off('change', '#deleteallimage').on('change', '#deleteallimage', function() {\r\n                            deleteButton.prop('disabled', !$(this).is(':checked'));\r\n                        });\r\n                    }, 300);\r\n                    return undefined;\r\n                })\r\n                .catch(function() {\r\n                    // Error logging disabled.\r\n                });\r\n            });\r\n\r\n            $('.delete-audio-quiz').on('click', function(event) {\r\n                event.preventDefault();\r\n                var quizname = $(this).data('quiz');\r\n                var cmid = $(this).data('cmid');\r\n                var quizid = $(this).data('quizid');\r\n                var newUrl = M.cfg.wwwroot + '/mod/quiz/accessrule/quizproctoring/imagesreport.php?cmid='\r\n                + cmid + '&deleteaudioquiz=' + quizid;\r\n                Promise.all([\r\n                    str.get_string('deleteallaudiosquiz', 'quizaccess_quizproctoring', quizname),\r\n                    str.get_string('confirmation', 'quizaccess_quizproctoring'),\r\n                    str.get_string('deleteallaudios', 'quizaccess_quizproctoring'),\r\n                    str.get_string('delete', 'moodle'),\r\n                    str.get_string('cancel', 'moodle'),\r\n                ]).then(function(strings) {\r\n                    var message = strings[0];\r\n                    var title = strings[1];\r\n                    var checkboxtext = strings[2];\r\n                    var deleteLabel = strings[3];\r\n                    var cancelLabel = strings[4];\r\n                    var checkboxHtml = '<div><input type=\"checkbox\" id=\"deleteallaudio\" /><label class=\"deleteall\">'\r\n                    + checkboxtext + '</label></div>';\r\n                    notification.confirm(\r\n                        title,\r\n                        message + checkboxHtml,\r\n                        deleteLabel,\r\n                        cancelLabel,\r\n                        function() {\r\n                            var allAudios = $('#deleteallaudio').is(':checked');\r\n                            if (allAudios) {\r\n                                newUrl += '&all=true';\r\n                                window.location.href = newUrl;\r\n                            }\r\n                        },\r\n                        function() {\r\n                            // Do nothing on 'Cancel'.\r\n                            return;\r\n                        }\r\n                    );\r\n                    setTimeout(function() {\r\n                        $('.modal-footer').addClass('deletenotifbtn');\r\n                        var deleteButton = $('.modal-footer button[data-action=\"save\"]');\r\n                        deleteButton.prop('disabled', true);\r\n                        $(document).off('change', '#deleteallaudio').on('change', '#deleteallaudio', function() {\r\n                            deleteButton.prop('disabled', !$(this).is(':checked'));\r\n                        });\r\n                    }, 300);\r\n                    return undefined;\r\n                })\r\n                .catch(function() {\r\n                    // Error logging disabled.\r\n                });\r\n            });\r\n\r\n            $('.delcourseaudio').on('click', function(event) {\r\n                event.preventDefault();\r\n                var coursename = $(this).data('course');\r\n                var cmid = $(this).data('cmid');\r\n                var courseid = $(this).data('courseid');\r\n                var newUrl = M.cfg.wwwroot + '/mod/quiz/accessrule/quizproctoring/imagesreport.php?cmid='\r\n                + cmid + '&deleteaudiocourse=' + courseid;\r\n                Promise.all([\r\n                    str.get_string('deleteallaudioscourse', 'quizaccess_quizproctoring', coursename),\r\n                    str.get_string('confirmation', 'quizaccess_quizproctoring'),\r\n                    str.get_string('deleteallaudios', 'quizaccess_quizproctoring'),\r\n                    str.get_string('delete', 'moodle'),\r\n                    str.get_string('cancel', 'moodle'),\r\n                ]).then(function(strings) {\r\n                    var message = strings[0];\r\n                    var title = strings[1];\r\n                    var checkboxtext = strings[2];\r\n                    var deleteLabel = strings[3];\r\n                    var cancelLabel = strings[4];\r\n                    var checkboxHtml = '<div><input type=\"checkbox\" id=\"deleteallaudioc\" /><label class=\"deleteall\">'\r\n                    + checkboxtext + '</label></div>';\r\n                    notification.confirm(\r\n                        title,\r\n                        message + checkboxHtml,\r\n                        deleteLabel,\r\n                        cancelLabel,\r\n                        function() {\r\n                            var allAudios = $('#deleteallaudioc').is(':checked');\r\n                            if (allAudios) {\r\n                                newUrl += '&all=true';\r\n                                window.location.href = newUrl;\r\n                            }\r\n                        },\r\n                        function() {\r\n                            // Do nothing on 'Cancel'.\r\n                            return;\r\n                        }\r\n                    );\r\n                    setTimeout(function() {\r\n                        $('.modal-footer').addClass('deletenotifbtn');\r\n                        var deleteButton = $('.modal-footer button[data-action=\"save\"]');\r\n                        deleteButton.prop('disabled', true);\r\n                        $(document).off('change', '#deleteallaudioc').on('change', '#deleteallaudioc', function() {\r\n                            deleteButton.prop('disabled', !$(this).is(':checked'));\r\n                        });\r\n                    }, 300);\r\n                    return undefined;\r\n                })\r\n                .catch(function() {\r\n                    // Error logging disabled.\r\n                });\r\n            });\r\n\r\n            $('.delcourse').on('click', function(event) {\r\n                event.preventDefault();\r\n                var coursename = $(this).data('course');\r\n                var cmid = $(this).data('cmid');\r\n                var courseid = $(this).data('courseid');\r\n                var newUrl = M.cfg.wwwroot + '/mod/quiz/accessrule/quizproctoring/imagesreport.php?cmid='\r\n                + cmid + '&delcourse=' + courseid;\r\n                Promise.all([\r\n                    str.get_string('deleteallimagescourse', 'quizaccess_quizproctoring', coursename),\r\n                    str.get_string('confirmation', 'quizaccess_quizproctoring'),\r\n                    str.get_string('deleteallimages', 'quizaccess_quizproctoring'),\r\n                    str.get_string('delete', 'moodle'),\r\n                    str.get_string('cancel', 'moodle'),\r\n                ]).then(function(strings) {\r\n                    var message = strings[0];\r\n                    var title = strings[1];\r\n                    var checkboxtext = strings[2];\r\n                    var deleteLabel = strings[3];\r\n                    var cancelLabel = strings[4];\r\n                    var checkboxHtml = '<div><input type=\"checkbox\" id=\"deleteallimag\" /><label class=\"deleteall\">'\r\n                    + checkboxtext + '</label></div>';\r\n                    notification.confirm(\r\n                        title,\r\n                        message + checkboxHtml,\r\n                        deleteLabel,\r\n                        cancelLabel,\r\n                        function() {\r\n                            var allImages = $('#deleteallimag').is(':checked');\r\n                            if (allImages) {\r\n                                newUrl += '&all=true';\r\n                                window.location.href = newUrl;\r\n                            }\r\n                        },\r\n                        function() {\r\n                            // Do nothing on 'Cancel'.\r\n                            return;\r\n                        }\r\n                    );\r\n                    setTimeout(function() {\r\n                        $('.modal-footer').addClass('deletenotifbtn');\r\n                        var deleteButton = $('.modal-footer button[data-action=\"save\"]');\r\n                        deleteButton.prop('disabled', true);\r\n                        $(document).off('change', '#deleteallimag').on('change', '#deleteallimag', function() {\r\n                            deleteButton.prop('disabled', !$(this).is(':checked'));\r\n                        });\r\n                    }, 300);\r\n                    return undefined;\r\n                })\r\n                .catch(function() {\r\n                    // Error logging disabled.\r\n                });\r\n            });\r\n\r\n            $('#attemptsreporttable').on('click', '.proctoringimage', function(event) {\r\n                event.preventDefault();\r\n                var attemptid = $(this).data('attemptid');\r\n                var quizid = $(this).data('quizid');\r\n                var userid = $(this).data('userid');\r\n                var startdate = $(this).data('startdate');\r\n                var all = false;\r\n                var modaltitle = M.util.get_string('proctoringimages', 'quizaccess_quizproctoring');\r\n                var storeAllImages = $('#storeallimages').val();\r\n\r\n                var checkboxLabel;\r\n                str.get_string('viewallimages_checkbox', 'quizaccess_quizproctoring').then(function(label) {\r\n                    checkboxLabel = label;\r\n                    return ModalFactory.create({\r\n                        type: ModalFactory.types.DEFAULT,\r\n                        body: '<div class=\"image-content\"><p>Loading images...</p></div><div class=\"pagination-controls\"></div>',\r\n                        title: modaltitle,\r\n                        large: true,\r\n                    });\r\n                }).then(function(modal) {\r\n                    modal.show();\r\n                    $('.imgcheckbox').prop('checked', false);\r\n                    var checkboxContainer = `\r\n                        <div class=\"checkbox-container\" style=\"display: none;\">\r\n                            <input type=\"checkbox\" class=\"imgcheckbox\">\r\n                            <label for=\"checkbox\" class=\"image-checkbox\">\r\n                                ${checkboxLabel}\r\n                            </label>\r\n                        </div>\r\n                    `;\r\n                    modal.getBody().prepend(checkboxContainer);\r\n                    return modal;\r\n                }).then(function(modal) {\r\n                    if (storeAllImages === '1') {\r\n                        modal.getBody().find('.checkbox-container').show();\r\n                    } else {\r\n                        modal.getBody().find('.checkbox-container').hide();\r\n                    }\r\n                    var perpage = 35;\r\n                    var currentPage = 1;\r\n                    var totalPages = 1;\r\n\r\n                    /**\r\n                     * Load images via AJAX\r\n                     *\r\n                     * @param {int} page page\r\n                     */\r\n                    function loadImages(page) {\r\n                        $.ajax({\r\n                            url: M.cfg.wwwroot + '/mod/quiz/accessrule/quizproctoring/ajax_report.php',\r\n                            data: {\r\n                                attemptid: attemptid,\r\n                                userid: userid,\r\n                                quizid: quizid,\r\n                                all: all.toString(),\r\n                                page: page,\r\n                                perpage: perpage,\r\n                            },\r\n                            dataType: 'json',\r\n                            success: function(response) {\r\n                                var images = response.images.map(function(image) {\r\n                                    return {\r\n                                        url: image.img,\r\n                                        title: image.title,\r\n                                        time: image.timecreated,\r\n                                        cssClass: getCssClass(image.imagestatus)\r\n                                    };\r\n                                });\r\n                                totalPages = response.totalPages;\r\n\r\n                                var data = {\r\n                                    attemptdate: startdate,\r\n                                    images: images,\r\n                                    currentPage: response.currentPage,\r\n                                    totalPages: response.totalPages,\r\n                                    isFirstPage: response.currentPage === 1,\r\n                                    isLastPage: response.currentPage === response.totalPages,\r\n                                    str: function(key) {\r\n                                        return M.util.get_string(key, 'quizaccess_quizproctoring');\r\n                                    }\r\n                                };\r\n\r\n                                modal.getBody().find('.image-content').html('');\r\n                                Templates.render('quizaccess_quizproctoring/response_modal', data)\r\n                                    .done(function(renderedHtml) {\r\n                                        modal.getBody().find('.image-content').html(renderedHtml);\r\n                                        // eslint-disable-next-line no-undef\r\n                                        lightbox.init();\r\n                                        var imagesInThisModal = modal.getBody().find('.image-link');\r\n                                        var totalImages = imagesInThisModal.length;\r\n\r\n                                        $('.image-link').on('click', function(event) {\r\n                                            event.preventDefault();\r\n                                            var index = imagesInThisModal.index($(this));\r\n                                            if (index === -1) {\r\n                                                return;\r\n                                            }\r\n                                            $('.lb-caption').each(function() {\r\n                                                if ($(this).next('.lb-num').length === 0) {\r\n                                                    $(this).after('<span class=\"lb-num\"></span>');\r\n                                                }\r\n                                            });\r\n                                            $('.lb-num').text('Image ' + (index + 1) + ' of ' + totalImages);\r\n\r\n                                            // eslint-disable-next-line no-undef\r\n                                            lightbox.start($(this));\r\n                                            $('.lb-next, .lb-prev').off('click').on('click', function(event) {\r\n                                                event.preventDefault();\r\n                                                if ($(this).hasClass('lb-next')) {\r\n                                                    index = (index + 1) % totalImages;\r\n                                                } else if ($(this).hasClass('lb-prev')) {\r\n                                                    index = (index - 1 + totalImages) % totalImages;\r\n                                                }\r\n                                                var newImageSrc = imagesInThisModal.eq(index).attr('href');\r\n                                                $('.lb-image').attr('src', newImageSrc);\r\n                                                $('.lb-num').text('Image ' + (index + 1) + ' of ' + totalImages);\r\n                                            });\r\n                                        });\r\n                                        $('.image-link').on('lightbox:open', function() {\r\n                                            $(this).next('.image-title').hide();\r\n                                        });\r\n\r\n                                        $('.imgcheckbox').prop('checked', all);\r\n                                        if (images.length > 0) {\r\n                                            modal.getBody().find('.pagination-controls')\r\n                                            .html(getPaginationControls(response.currentPage, response.totalPages));\r\n                                        } else {\r\n                                            modal.getBody().find('.pagination-controls').html('');\r\n                                        }\r\n                                    });\r\n                            },\r\n                            error: function(jqXHR, textStatus) {\r\n                                modal.getBody().find('.image-content').html('<p>Error loading images: '\r\n                                    + textStatus + '</p>');\r\n                            }\r\n                        });\r\n                    }\r\n\r\n                    /**\r\n                     * Get css class\r\n                     *\r\n                     * @param {text} status status\r\n                     * @return {string} status class\r\n                     */\r\n                    function getCssClass(status) {\r\n                        switch (status.toLowerCase()) {\r\n                            case 'main image':\r\n                                return 'main-image';\r\n                            case 'warning':\r\n                                return 'warning-image';\r\n                            default:\r\n                                return 'green-image';\r\n                        }\r\n                    }\r\n\r\n                    /**\r\n                     * Get pagination controls\r\n                     * @param {int} currentPage Current page number\r\n                     * @param {int} totalPages Total number of pages\r\n                     * @return {string} HTML for pagination controls\r\n                     */\r\n                    function getPaginationControls(currentPage, totalPages) {\r\n                        var prevButton = '<button class=\"prev-page\" ' +\r\n                            (currentPage === 1 ? 'disabled' : '') + '>Previous</button>';\r\n                        var nextButton = '<button class=\"next-page\" ' +\r\n                            (currentPage === totalPages ? 'disabled' : '') + '>Next</button>';\r\n\r\n                        return '<div>' + prevButton + ' Page ' + currentPage\r\n                            + ' of ' + totalPages + ' ' + nextButton + '</div>';\r\n                    }\r\n\r\n                    modal.getRoot().on('hidden.bs.modal', function() {\r\n                        $('.imgcheckbox').prop('checked', false);\r\n                    });\r\n\r\n                    modal.getBody().on('change', '.imgcheckbox', function() {\r\n                        all = $(this).is(':checked'); // Store boolean directly.\r\n                        modaltitle = all ? M.util.get_string('allimages', 'quizaccess_quizproctoring')\r\n                                         : M.util.get_string('proctoringimages', 'quizaccess_quizproctoring');\r\n                        modal.setTitle(modaltitle);\r\n                        loadImages(currentPage);\r\n                    });\r\n\r\n                    modal.getBody().off('click', '.prev-page').on('click', '.prev-page', function() {\r\n                        if (currentPage > 1) {\r\n                            currentPage--;\r\n                            loadImages(currentPage);\r\n                        }\r\n                    });\r\n\r\n                    modal.getBody().off('click', '.next-page').on('click', '.next-page', function() {\r\n                        if (currentPage < totalPages) {\r\n                            currentPage++;\r\n                            loadImages(currentPage);\r\n                        }\r\n                    });\r\n                    loadImages(currentPage);\r\n\r\n                    modal.getBody().on('click', '.close', function() {\r\n                        $('.imgcheckbox').prop('checked', false);\r\n                    });\r\n\r\n                    let escapePressed = false;\r\n                    $(document).on('keydown', function(event) {\r\n                        if (event.key === \"Escape\" && !escapePressed) {\r\n                            escapePressed = true;\r\n\r\n                            if ($('.lb-container').css('display') === 'block') {\r\n                                // eslint-disable-next-line no-undef\r\n                                lightbox.end();\r\n                            }\r\n                            if (typeof modal !== 'undefined' && modal.isVisible()) {\r\n                                modal.hide();\r\n                            }\r\n                            setTimeout(() => {\r\n                                escapePressed = false;\r\n                            }, 50);\r\n                            event.stopPropagation();\r\n                            $('.imgcheckbox').prop('checked', false); // Reset checkbox.\r\n                        }\r\n                    });\r\n                    return undefined;\r\n                }).catch(function() {\r\n                    // Error logging disabled.\r\n                });\r\n            });\r\n\r\n            $('#attemptsreporttable').on('click', '.proctoringaudio', function(event) {\r\n                event.preventDefault();\r\n\r\n                var attemptid = $(this).data('attemptid');\r\n                var startdate = $(this).data('startdate');\r\n                var modaltitle = M.util.get_string('proctoringaudio', 'quizaccess_quizproctoring');\r\n\r\n                ModalFactory.create({\r\n                    type: ModalFactory.types.DEFAULT,\r\n                    body: '<div class=\"audio-content\"><p>Loading audios...</p></div><div class=\"pagination-controls\"></div>',\r\n                    title: modaltitle,\r\n                    large: true,\r\n                }).then(function(modal) {\r\n                    modal.show();\r\n\r\n                    var perpage = 20;\r\n                    var currentPage = 1;\r\n                    var totalPages = 1;\r\n\r\n                    /**\r\n                     * Stops all audio playback in the modal by pausing and resetting all audio elements.\r\n                     */\r\n                    function stopAllAudioInModal() {\r\n                        modal.getRoot().find('audio').each(function() {\r\n                            this.pause();\r\n                            this.currentTime = 0;\r\n                        });\r\n                    }\r\n\r\n                    modal.getRoot().on(ModalEvents.hidden, function() {\r\n                        stopAllAudioInModal();\r\n                        $(document).off('keydown.stopAllAudioOnEsc');\r\n                    });\r\n\r\n                    $(document).on('keydown.stopAllAudioOnEsc', function(e) {\r\n                        if (e.key === 'Escape') {\r\n                            stopAllAudioInModal();\r\n                        }\r\n                    });\r\n\r\n                    modal.getRoot().on('click', '.prev-page, .next-page', function() {\r\n                        stopAllAudioInModal();\r\n                    });\r\n\r\n                    /**\r\n                     * Loads audio files for a specific page via AJAX and renders them in the modal.\r\n                     * @param {number} page - The page number to load.\r\n                     */\r\n                    function loadAudios(page) {\r\n                        $.ajax({\r\n                            url: M.cfg.wwwroot + '/mod/quiz/accessrule/quizproctoring/audio_report.php',\r\n                            data: {\r\n                                attemptid: attemptid,\r\n                                page: page,\r\n                                perpage: perpage,\r\n                            },\r\n                            dataType: 'json',\r\n                            success: function(response) {\r\n                                if (!response || !Array.isArray(response.audios)) {\r\n                                    modal.getBody().find('.audio-content').html('<p>Error: Invalid audio.</p>');\r\n                                    modal.getBody().find('.pagination-controls').html('');\r\n                                    return;\r\n                                }\r\n\r\n                                totalPages = response.totalPages;\r\n\r\n                                var audios = response.audios.map(function(audio) {\r\n                                    return {\r\n                                        url: audio.audiofile,\r\n                                        time: audio.timecreated\r\n                                    };\r\n                                });\r\n\r\n                                var data = {\r\n                                    attemptdate: startdate,\r\n                                    audios: audios,\r\n                                    currentPage: response.currentPage,\r\n                                    totalPages: response.totalPages,\r\n                                    isFirstPage: response.currentPage === 1,\r\n                                    isLastPage: response.currentPage === response.totalPages,\r\n                                    str: function(key) {\r\n                                        return M.util.get_string(key, 'quizaccess_quizproctoring');\r\n                                    }\r\n                                };\r\n\r\n                                modal.getBody().find('.audio-content').html('');\r\n                                Templates.render('quizaccess_quizproctoring/response_audio_modal', data)\r\n                                    .done(function(renderedHtml) {\r\n                                        modal.getBody().find('.audio-content').html(renderedHtml);\r\n\r\n                                        $('audio').on('play', function() {\r\n                                            $('audio').not(this).each(function() {\r\n                                                this.pause();\r\n                                                this.currentTime = 0;\r\n                                            });\r\n                                        });\r\n\r\n                                        if (audios.length > 0) {\r\n                                            modal.getBody().find('.pagination-controls')\r\n                                                .html(getPaginationControls(response.currentPage, response.totalPages));\r\n                                        } else {\r\n                                            modal.getBody().find('.pagination-controls').html('');\r\n                                        }\r\n                                    });\r\n                            },\r\n                            error: function(jqXHR, textStatus) {\r\n                                modal.getBody().find('.audio-content').html('<p>Error loading audios: ' + textStatus + '</p>');\r\n                            }\r\n                        });\r\n                    }\r\n\r\n                    /**\r\n                     * Generates HTML for pagination controls (Previous/Next buttons).\r\n                     * @param {number} currentPage - The current page number.\r\n                     * @param {number} totalPages - The total number of pages.\r\n                     * @returns {string} HTML string containing pagination controls.\r\n                     */\r\n                    function getPaginationControls(currentPage, totalPages) {\r\n                        var prevButton = '<button class=\"prev-page\" ' +\r\n                            (currentPage === 1 ? 'disabled' : '') + '>Previous</button>';\r\n                        var nextButton = '<button class=\"next-page\" ' +\r\n                            (currentPage === totalPages ? 'disabled' : '') + '>Next</button>';\r\n\r\n                        return '<div>' + prevButton + ' Page ' + currentPage + ' of ' + totalPages + ' ' + nextButton + '</div>';\r\n                    }\r\n\r\n                    modal.getBody().off('click', '.prev-page').on('click', '.prev-page', function() {\r\n                        if (currentPage > 1) {\r\n                            currentPage--;\r\n                            loadAudios(currentPage);\r\n                        }\r\n                    });\r\n\r\n                    modal.getBody().off('click', '.next-page').on('click', '.next-page', function() {\r\n                        if (currentPage < totalPages) {\r\n                            currentPage++;\r\n                            loadAudios(currentPage);\r\n                        }\r\n                    });\r\n\r\n                    loadAudios(currentPage);\r\n                    return modal;\r\n                }).catch(function() {\r\n                    // Error logging disabled.\r\n                });\r\n            });\r\n\r\n            $('#attemptsreporttable').on('click', '.proctoridentity', function(event) {\r\n                event.preventDefault();\r\n                $.ajax({\r\n                    url: M.cfg.wwwroot + '/mod/quiz/accessrule/quizproctoring/proctoridentity.php',\r\n                    data: {\r\n                        attemptid: $(this).data('attemptid'),\r\n                        userid: $(this).data('userid'),\r\n                        quizid: $(this).data('quizid')\r\n                    },\r\n                    dataType: 'json',\r\n                    success: function(response) {\r\n                        var residentity = JSON.parse(JSON.stringify(response));\r\n                        if (residentity.success) {\r\n                            window.open(residentity.url, \"_blank\");\r\n                        } else {\r\n                            return ModalFactory.create({\r\n                                type: ModalFactory.types.DEFAULT,\r\n                                body: residentity.message,\r\n                            }).then(function(modal) {\r\n                                modal.getRoot().on(ModalEvents.hidden, modal.destroy.bind(modal));\r\n                                modal.show();\r\n                                return null;\r\n                            }).catch(function() {\r\n                                // Error logging disabled.\r\n                            });\r\n                        }\r\n                        return true;\r\n                    }\r\n                });\r\n            });\r\n\r\n            // Handle click on device info icon to display device name in modal\r\n            $(document).on('click', '.device-info-icon', function(event) {\r\n                event.preventDefault();\r\n                event.stopPropagation();\r\n                var deviceinfo = $(this).data('deviceinfo');\r\n                if (deviceinfo) {\r\n                    // Escape device info to prevent XSS\r\n                    var escapedDeviceInfo = $('<div>').text(deviceinfo).html();\r\n                    return ModalFactory.create({\r\n                        type: ModalFactory.types.DEFAULT,\r\n                        body: '<div class=\"device-info-content\"><p>' + escapedDeviceInfo + '</p></div>',\r\n                        title: 'Device Information',\r\n                    }).then(function(modal) {\r\n                        modal.getRoot().on(ModalEvents.hidden, modal.destroy.bind(modal));\r\n                        modal.show();\r\n                        return null;\r\n                    }).catch(function() {\r\n                        // Error logging disabled.\r\n                    });\r\n                }\r\n                return undefined;\r\n            });\r\n\r\n            $('#attemptsreporttable').on('click', '.generate', function(event) {\r\n                event.preventDefault();\r\n\r\n                const attemptid = $(this).data('attemptid');\r\n                const quizid = $(this).data('quizid');\r\n                const userid = $(this).data('userid');\r\n                const username = encodeURIComponent($(this).data('username')); // URL-safe.\r\n\r\n                const url = `${M.cfg.wwwroot}/mod/quiz/accessrule/quizproctoring/userreport.php` +\r\n                `?attemptid=${attemptid}` +\r\n                `&quizid=${quizid}` +\r\n                `&userid=${userid}` +\r\n                `&username=${username}`;\r\n\r\n                window.open(url, '_blank');\r\n            });\r\n\r\n            // Handle alerts modal.\r\n            $(document).on('click', '.alert-icon', function(event) {\r\n                event.preventDefault();\r\n                event.stopPropagation();\r\n\r\n                var $icon = $(this);\r\n                var alertsDataJson = $icon.attr('data-alerts');\r\n\r\n                if (!alertsDataJson) {\r\n                    return;\r\n                }\r\n\r\n                var alertsData;\r\n                try {\r\n                    alertsData = JSON.parse(alertsDataJson);\r\n                } catch (e) {\r\n                    // Show error notification without blocking.\r\n                    str.get_string('error', 'moodle').catch(function() {\r\n                        return 'Error parsing alerts data';\r\n                    }).then(function(errorMsg) {\r\n                        notification.addNotification({\r\n                            message: errorMsg,\r\n                            type: 'error'\r\n                        });\r\n                        return undefined;\r\n                    }).catch(function() {\r\n                        // Error logging disabled.\r\n                    });\r\n                    return;\r\n                }\r\n\r\n                /**\r\n                 * Show error notification for alerts loading failure.\r\n                 * @return {Promise} Promise that resolves when notification is shown\r\n                 */\r\n                function showAlertsError() {\r\n                    return str.get_string('error', 'moodle')\r\n                        .then(function(errorMsg) {\r\n                            notification.addNotification({\r\n                                message: errorMsg,\r\n                                type: 'error'\r\n                            });\r\n                            return undefined;\r\n                        })\r\n                        .catch(function() {\r\n                            notification.addNotification({\r\n                                message: 'Error loading alerts',\r\n                                type: 'error'\r\n                            });\r\n                            return undefined;\r\n                        });\r\n                }\r\n\r\n                Promise.all([\r\n                    str.get_string('alerts', 'quizaccess_quizproctoring'),\r\n                    str.get_string('close', 'moodle')\r\n                ]).then(function(strings) {\r\n                    var alertTitle = strings[0];\r\n                    var closeLabel = strings[1];\r\n\r\n                    /**\r\n                     * Escape HTML to prevent XSS attacks.\r\n                     *\r\n                     * @param {string} text Text to escape\r\n                     * @return {string} Escaped text\r\n                     */\r\n                    function escapeHtml(text) {\r\n                        if (!text) {\r\n                            return '';\r\n                        }\r\n                        return String(text)\r\n                            .replace(/&/g, '&amp;')\r\n                            .replace(/</g, '&lt;')\r\n                            .replace(/>/g, '&gt;')\r\n                            .replace(/\"/g, '&quot;')\r\n                            .replace(/'/g, '&#039;');\r\n                    }\r\n\r\n                    /**\r\n                     * Build alert row HTML.\r\n                     *\r\n                     * @param {Object} alert Alert object with message, time, and teacher\r\n                     * @return {string} HTML string for alert row\r\n                     */\r\n                    function buildAlertRow(alert) {\r\n                        var message = escapeHtml(alert.message || '');\r\n                        var time = escapeHtml(alert.time || '');\r\n                        var teacher = escapeHtml(alert.teacher || '');\r\n\r\n                        var teacherHtml = '';\r\n                        if (teacher) {\r\n                            teacherHtml = '<div class=\"alert-teacher\">' +\r\n                                '<strong>Teacher:</strong> ' + teacher +\r\n                                '</div>';\r\n                        }\r\n\r\n                        return '<div class=\"alert-row\">' +\r\n                            teacherHtml +\r\n                            '<div class=\"alert-content\">' +\r\n                            '<div class=\"alert-message\">' + message + '</div>' +\r\n                            '<div class=\"alert-time\">' + time + '</div>' +\r\n                            '</div>' +\r\n                            '</div>';\r\n                    }\r\n\r\n                    /**\r\n                     * Build modal HTML.\r\n                     *\r\n                     * @param {string} title Modal title\r\n                     * @param {Array} alerts Array of alert objects\r\n                     * @return {string} Complete modal HTML\r\n                     */\r\n                    function buildModalHtml(title, alerts) {\r\n                        var bodyContent = '';\r\n                        if (alerts && alerts.length > 0) {\r\n                            alerts.forEach(function(alert) {\r\n                                bodyContent += buildAlertRow(alert);\r\n                            });\r\n                        } else {\r\n                            bodyContent = '<p class=\"no-alerts\">No alerts found</p>';\r\n                        }\r\n\r\n                        return '<div id=\"alertsModal\" class=\"alerts-modal\">' +\r\n                            '<div class=\"alerts-modal-content\">' +\r\n                            '<div class=\"alerts-modal-header\">' +\r\n                            '<h4 class=\"alerts-modal-title\">' + escapeHtml(title) + '</h4>' +\r\n                            '<button type=\"button\" class=\"alerts-close\" aria-label=\"' + escapeHtml(closeLabel) + '\">' +\r\n                            '<span aria-hidden=\"true\">&times;</span>' +\r\n                            '</button>' +\r\n                            '</div>' +\r\n                            '<div class=\"alerts-modal-body\">' + bodyContent + '</div>' +\r\n                            '</div>' +\r\n                            '</div>';\r\n                    }\r\n\r\n                    /**\r\n                     * Close alerts modal and clean up event listeners.\r\n                     */\r\n                    function closeAlertsModal() {\r\n                        var modalElement = $('#alertsModal');\r\n                        if (modalElement.length > 0) {\r\n                            modalElement.removeClass('show');\r\n                            setTimeout(function() {\r\n                                modalElement.remove();\r\n                                $(document).off('keydown.alertsModal');\r\n                            }, 300);\r\n                        }\r\n                    }\r\n\r\n                    // Remove existing modal if any.\r\n                    var existingModal = $('#alertsModal');\r\n                    if (existingModal.length > 0) {\r\n                        existingModal.remove();\r\n                        $(document).off('keydown.alertsModal');\r\n                    }\r\n\r\n                    // Build and add modal to body.\r\n                    var modalHtml = buildModalHtml(alertTitle, alertsData);\r\n                    $('body').append(modalHtml);\r\n\r\n                    // Show modal with animation.\r\n                    var modal = $('#alertsModal');\r\n                    setTimeout(function() {\r\n                        modal.addClass('show');\r\n                    }, 10);\r\n\r\n                    // Close handlers.\r\n                    modal.on('click', '.alerts-close', function() {\r\n                        closeAlertsModal();\r\n                    });\r\n\r\n                    // Close on backdrop click.\r\n                    modal.on('click', function(e) {\r\n                        if ($(e.target).is('#alertsModal')) {\r\n                            closeAlertsModal();\r\n                        }\r\n                    });\r\n\r\n                    // Close on Escape key.\r\n                    $(document).on('keydown.alertsModal', function(e) {\r\n                        if (e.key === 'Escape' && modal.is(':visible')) {\r\n                            closeAlertsModal();\r\n                        }\r\n                    });\r\n\r\n                    return undefined;\r\n                }).catch(function() {\r\n                    // Handle error by showing notification.\r\n                    return showAlertsError();\r\n                });\r\n            });\r\n\r\n            $('#attemptsreporttable').on('click', '.eyetoggle', function(event) {\r\n                event.preventDefault();\r\n                event.stopPropagation();\r\n\r\n                const $checkbox = $(this).find('input[type=\"checkbox\"]');\r\n                const currentState = $checkbox.is(':checked');\r\n\r\n                const $toggle = $(this);\r\n                const cmid = $toggle.data('cmid');\r\n                const attemptid = $toggle.data('attemptid');\r\n                const userid = $toggle.data('userid');\r\n                const useremail = $toggle.data('useremail');\r\n                const action = $toggle.data('action');\r\n\r\n                setTimeout(function() {\r\n                    $checkbox.prop('checked', currentState);\r\n                }, 0);\r\n\r\n                /**\r\n                 * Show error notification for eye toggle operation\r\n                 * @return {Promise} Promise that resolves when notification is shown\r\n                 */\r\n                function showEyeToggleError() {\r\n                    return str.get_string('eyeofferror', 'quizaccess_quizproctoring')\r\n                        .then(function(text) {\r\n                            notification.addNotification({\r\n                                message: text,\r\n                                type: 'error'\r\n                            });\r\n                            return undefined;\r\n                        })\r\n                        .catch(function() {\r\n                            notification.addNotification({\r\n                                message: 'Error occurred',\r\n                                type: 'error'\r\n                            });\r\n                            return undefined;\r\n                        });\r\n                }\r\n\r\n                /**\r\n                 * Handle the AJAX toggle action\r\n                 * @param {string} setGlobalValue The value for setglobal parameter\r\n                 */\r\n                function handleToggleAction(setGlobalValue) {\r\n                    $.ajax({\r\n                        url: M.cfg.wwwroot + '/mod/quiz/accessrule/quizproctoring/ajax_eyetoggle.php',\r\n                        method: 'POST',\r\n                        data: {\r\n                            cmid: cmid,\r\n                            attemptid: attemptid,\r\n                            userid: userid,\r\n                            action: action,\r\n                            setglobal: setGlobalValue\r\n                        },\r\n                        dataType: 'json',\r\n                        success: function(response) {\r\n                            if (response.success) {\r\n                                if (typeof window.attemptsReportTable !== 'undefined' &&\r\n                                    window.attemptsReportTable &&\r\n                                    typeof window.attemptsReportTable.ajax !== 'undefined' &&\r\n                                    typeof window.attemptsReportTable.ajax.reload === 'function') {\r\n                                    window.attemptsReportTable.ajax.reload(null, false);\r\n                                } else {\r\n                                    window.location.reload();\r\n                                }\r\n                            }\r\n                        },\r\n                        error: showEyeToggleError\r\n                    });\r\n                }\r\n\r\n                /**\r\n                 * Show confirmation dialog with checkbox\r\n                 * @param {boolean} checkboxChecked Whether checkbox should be checked\r\n                 */\r\n                function showConfirmationDialog(checkboxChecked) {\r\n                    const messageKey = action === 'disable' ? 'disableeyetrackingmessage' : 'enableeyetrackingmessage';\r\n                    Promise.all([\r\n                        str.get_string(messageKey, 'quizaccess_quizproctoring', useremail),\r\n                        str.get_string('disableeyetrackingallquizzes', 'quizaccess_quizproctoring'),\r\n                        str.get_string('yes', 'moodle'),\r\n                        str.get_string('cancel', 'moodle')\r\n                    ]).then(function(strings) {\r\n                        const message = strings[0];\r\n                        const checkboxText = strings[1];\r\n                        const confirmLabel = strings[2];\r\n                        const cancelLabel = strings[3];\r\n\r\n                        const checkboxHtml = `\r\n                            <div style=\"margin-top: 15px;\">\r\n                                <input type=\"checkbox\" id=\"eyetrackingglobal\" ${checkboxChecked ?\r\n                                    'checked' : ''} />\r\n                                <label for=\"eyetrackingglobal\" style=\"margin-left: 5px;\">\r\n                                    ${checkboxText}\r\n                                </label>\r\n                            </div>\r\n                        `;\r\n\r\n                        notification.confirm(\r\n                            '',\r\n                            message + checkboxHtml,\r\n                            confirmLabel,\r\n                            cancelLabel,\r\n                            function() {\r\n                                const setGlobal = $('#eyetrackingglobal').is(':checked') ? 1 : 0;\r\n                                handleToggleAction(setGlobal);\r\n                            },\r\n                            function() {\r\n                                return;\r\n                            }\r\n                        );\r\n                        return undefined;\r\n                    }).catch(function() {\r\n                        notification.addNotification({\r\n                            message: 'Error loading confirmation dialog',\r\n                            type: 'error'\r\n                        });\r\n                        return undefined;\r\n                    });\r\n                }\r\n\r\n                // Get global preference to determine if checkbox should be checked.\r\n                $.ajax({\r\n                    url: M.cfg.wwwroot + '/mod/quiz/accessrule/quizproctoring/ajax_eyetoggle.php',\r\n                    method: 'POST',\r\n                    data: {\r\n                        cmid: cmid,\r\n                        attemptid: attemptid,\r\n                        userid: userid,\r\n                        action: 'getpreference'\r\n                    },\r\n                    dataType: 'json',\r\n                    success: function(prefResponse) {\r\n                        const hasGlobalPref = (prefResponse.globalpreference !== null &&\r\n                                             prefResponse.globalpreference !== undefined);\r\n                        const checkboxChecked = hasGlobalPref;\r\n                        showConfirmationDialog(checkboxChecked);\r\n                    },\r\n                    error: function() {\r\n                        showConfirmationDialog(false);\r\n                    }\r\n                });\r\n            });\r\n        }\r\n    };\r\n});\r\n"],"names":["define","$","ModalFactory","ModalEvents","Templates","str","notification","init","document","ready","lightbox","on","event","preventDefault","username","this","data","cmid","quizid","userid","newUrl","M","cfg","wwwroot","Promise","all","get_string","then","strings","message","title","checkboxtext","deleteLabel","cancelLabel","checkboxHtml","confirm","is","window","location","href","setTimeout","addClass","deleteButton","prop","off","catch","quizname","coursename","courseid","checkboxLabel","attemptid","startdate","modaltitle","util","storeAllImages","val","label","create","type","types","DEFAULT","body","large","modal","show","checkboxContainer","getBody","prepend","find","hide","currentPage","totalPages","loadImages","page","ajax","url","toString","perpage","dataType","success","response","images","map","image","img","time","timecreated","cssClass","getCssClass","imagestatus","attemptdate","isFirstPage","isLastPage","key","html","render","done","renderedHtml","imagesInThisModal","totalImages","length","index","each","next","after","text","start","hasClass","newImageSrc","eq","attr","getPaginationControls","error","jqXHR","textStatus","status","toLowerCase","getRoot","setTitle","escapePressed","css","end","isVisible","stopPropagation","stopAllAudioInModal","pause","currentTime","loadAudios","Array","isArray","audios","audio","audiofile","not","hidden","e","residentity","JSON","parse","stringify","open","destroy","bind","deviceinfo","escapedDeviceInfo","encodeURIComponent","alertsDataJson","alertsData","errorMsg","addNotification","alertTitle","closeLabel","escapeHtml","String","replace","closeAlertsModal","modalElement","removeClass","remove","existingModal","alerts","bodyContent","modalHtml","forEach","alert","teacher","teacherHtml","buildAlertRow","append","target","$checkbox","currentState","$toggle","useremail","action","showEyeToggleError","showConfirmationDialog","checkboxChecked","messageKey","checkboxText","confirmLabel","setGlobal","setGlobalValue","method","setglobal","attemptsReportTable","reload","prefResponse","globalpreference","undefined"],"mappings":"AAAAA,0CAAO,CAAC,SAAU,qBAAsB,oBAAqB,iBAAkB,WAAY,sBAC3F,SAASC,EAAGC,aAAcC,YAAaC,UAAWC,IAAKC,oBAC5C,CACHC,KAAM,WACFN,EAAEO,UAAUC,OAAM,WACU,oBAAbC,UAEPA,SAASH,UAGjBN,EAAE,0BAA0BU,GAAG,QAAS,gBAAgB,SAASC,OAC7DA,MAAMC,qBACFC,SAAWb,EAAEc,MAAMC,KAAK,YACxBC,KAAOhB,EAAEc,MAAMC,KAAK,QACpBE,OAASjB,EAAEc,MAAMC,KAAK,UACtBG,OAASlB,EAAEc,MAAMC,KAAK,UACtBI,OAASC,EAAEC,IAAIC,QAAU,mEAC3BJ,OAAS,SAAWF,KAAO,WAAaC,OAC1CM,QAAQC,IAAI,CACRpB,IAAIqB,WAAW,sBAAuB,4BAA6BZ,UACnET,IAAIqB,WAAW,eAAgB,6BAC/BrB,IAAIqB,WAAW,kBAAmB,6BAClCrB,IAAIqB,WAAW,SAAU,UACzBrB,IAAIqB,WAAW,SAAU,YAC1BC,MAAK,SAASC,aACTC,QAAUD,QAAQ,GAClBE,MAAQF,QAAQ,GAChBG,aAAeH,QAAQ,GACvBI,YAAcJ,QAAQ,GACtBK,YAAcL,QAAQ,GACtBM,aAAe,+EACjBH,aAAe,iBACjBzB,aAAa6B,QACTL,MACAD,QAAUK,aACVF,YACAC,aACA,WACoBhC,EAAE,oBAAoBmC,GAAG,cAErChB,QAAU,YACViB,OAAOC,SAASC,KAAOnB,WAG/B,eAKJoB,YAAW,WACPvC,EAAE,iBAAiBwC,SAAS,sBACxBC,aAAezC,EAAE,4CACrByC,aAAaC,KAAK,YAAY,GAC9B1C,EAAEO,UAAUoC,IAAI,SAAU,oBAAoBjC,GAAG,SAAU,oBAAoB,WAC3E+B,aAAaC,KAAK,YAAa1C,EAAEc,MAAMqB,GAAG,kBAE/C,QAGNS,OAAM,kBAKX5C,EAAE,0BAA0BU,GAAG,QAAS,iBAAiB,SAASC,OAC9DA,MAAMC,qBACFC,SAAWb,EAAEc,MAAMC,KAAK,YACxBC,KAAOhB,EAAEc,MAAMC,KAAK,QACpBE,OAASjB,EAAEc,MAAMC,KAAK,UACtBG,OAASlB,EAAEc,MAAMC,KAAK,UACtBI,OAASC,EAAEC,IAAIC,QAAU,wEAC3BJ,OAAS,SAAWF,KAAO,WAAaC,OAC1CM,QAAQC,IAAI,CACRpB,IAAIqB,WAAW,sBAAuB,4BAA6BZ,UACnET,IAAIqB,WAAW,eAAgB,6BAC/BrB,IAAIqB,WAAW,kBAAmB,6BAClCrB,IAAIqB,WAAW,SAAU,UACzBrB,IAAIqB,WAAW,SAAU,YAC1BC,MAAK,SAASC,aACTC,QAAUD,QAAQ,GAClBE,MAAQF,QAAQ,GAChBG,aAAeH,QAAQ,GACvBI,YAAcJ,QAAQ,GACtBK,YAAcL,QAAQ,GACtBM,aAAe,+EACjBH,aAAe,iBACjBzB,aAAa6B,QACTL,MACAD,QAAUK,aACVF,YACAC,aACA,WACqBhC,EAAE,oBAAoBmC,GAAG,cAEtChB,QAAU,YACViB,OAAOC,SAASC,KAAOnB,WAG/B,eAKJoB,YAAW,WACPvC,EAAE,iBAAiBwC,SAAS,sBACxBC,aAAezC,EAAE,4CACrByC,aAAaC,KAAK,YAAY,GAC9B1C,EAAEO,UAAUoC,IAAI,SAAU,oBAAoBjC,GAAG,SAAU,oBAAoB,WAC3E+B,aAAaC,KAAK,YAAa1C,EAAEc,MAAMqB,GAAG,kBAE/C,QAGNS,OAAM,kBAKX5C,EAAE,gBAAgBU,GAAG,SAAS,SAASC,OACnCA,MAAMC,qBACFiC,SAAW7C,EAAEc,MAAMC,KAAK,QACxBC,KAAOhB,EAAEc,MAAMC,KAAK,QACpBE,OAASjB,EAAEc,MAAMC,KAAK,UACtBI,OAASC,EAAEC,IAAIC,QAAU,6DAC3BN,KAAO,WAAaC,OACtBM,QAAQC,IAAI,CACRpB,IAAIqB,WAAW,sBAAuB,4BAA6BoB,UACnEzC,IAAIqB,WAAW,eAAgB,6BAC/BrB,IAAIqB,WAAW,kBAAmB,6BAClCrB,IAAIqB,WAAW,SAAU,UACzBrB,IAAIqB,WAAW,SAAU,YAC1BC,MAAK,SAASC,aACTC,QAAUD,QAAQ,GAClBE,MAAQF,QAAQ,GAChBG,aAAeH,QAAQ,GACvBI,YAAcJ,QAAQ,GACtBK,YAAcL,QAAQ,GACtBM,aAAe,8EACjBH,aAAe,iBACjBzB,aAAa6B,QACTL,MACAD,QAAUK,aACVF,YACAC,aACA,WACoBhC,EAAE,mBAAmBmC,GAAG,cAEpChB,QAAU,YACViB,OAAOC,SAASC,KAAOnB,WAG/B,eAKJoB,YAAW,WACPvC,EAAE,iBAAiBwC,SAAS,sBACxBC,aAAezC,EAAE,4CACrByC,aAAaC,KAAK,YAAY,GAC9B1C,EAAEO,UAAUoC,IAAI,SAAU,mBAAmBjC,GAAG,SAAU,mBAAmB,WACzE+B,aAAaC,KAAK,YAAa1C,EAAEc,MAAMqB,GAAG,kBAE/C,QAGNS,OAAM,kBAKX5C,EAAE,sBAAsBU,GAAG,SAAS,SAASC,OACzCA,MAAMC,qBACFiC,SAAW7C,EAAEc,MAAMC,KAAK,QACxBC,KAAOhB,EAAEc,MAAMC,KAAK,QACpBE,OAASjB,EAAEc,MAAMC,KAAK,UACtBI,OAASC,EAAEC,IAAIC,QAAU,6DAC3BN,KAAO,oBAAsBC,OAC/BM,QAAQC,IAAI,CACRpB,IAAIqB,WAAW,sBAAuB,4BAA6BoB,UACnEzC,IAAIqB,WAAW,eAAgB,6BAC/BrB,IAAIqB,WAAW,kBAAmB,6BAClCrB,IAAIqB,WAAW,SAAU,UACzBrB,IAAIqB,WAAW,SAAU,YAC1BC,MAAK,SAASC,aACTC,QAAUD,QAAQ,GAClBE,MAAQF,QAAQ,GAChBG,aAAeH,QAAQ,GACvBI,YAAcJ,QAAQ,GACtBK,YAAcL,QAAQ,GACtBM,aAAe,8EACjBH,aAAe,iBACjBzB,aAAa6B,QACTL,MACAD,QAAUK,aACVF,YACAC,aACA,WACoBhC,EAAE,mBAAmBmC,GAAG,cAEpChB,QAAU,YACViB,OAAOC,SAASC,KAAOnB,WAG/B,eAKJoB,YAAW,WACPvC,EAAE,iBAAiBwC,SAAS,sBACxBC,aAAezC,EAAE,4CACrByC,aAAaC,KAAK,YAAY,GAC9B1C,EAAEO,UAAUoC,IAAI,SAAU,mBAAmBjC,GAAG,SAAU,mBAAmB,WACzE+B,aAAaC,KAAK,YAAa1C,EAAEc,MAAMqB,GAAG,kBAE/C,QAGNS,OAAM,kBAKX5C,EAAE,mBAAmBU,GAAG,SAAS,SAASC,OACtCA,MAAMC,qBACFkC,WAAa9C,EAAEc,MAAMC,KAAK,UAC1BC,KAAOhB,EAAEc,MAAMC,KAAK,QACpBgC,SAAW/C,EAAEc,MAAMC,KAAK,YACxBI,OAASC,EAAEC,IAAIC,QAAU,6DAC3BN,KAAO,sBAAwB+B,SACjCxB,QAAQC,IAAI,CACRpB,IAAIqB,WAAW,wBAAyB,4BAA6BqB,YACrE1C,IAAIqB,WAAW,eAAgB,6BAC/BrB,IAAIqB,WAAW,kBAAmB,6BAClCrB,IAAIqB,WAAW,SAAU,UACzBrB,IAAIqB,WAAW,SAAU,YAC1BC,MAAK,SAASC,aACTC,QAAUD,QAAQ,GAClBE,MAAQF,QAAQ,GAChBG,aAAeH,QAAQ,GACvBI,YAAcJ,QAAQ,GACtBK,YAAcL,QAAQ,GACtBM,aAAe,+EACjBH,aAAe,iBACjBzB,aAAa6B,QACTL,MACAD,QAAUK,aACVF,YACAC,aACA,WACoBhC,EAAE,oBAAoBmC,GAAG,cAErChB,QAAU,YACViB,OAAOC,SAASC,KAAOnB,WAG/B,eAKJoB,YAAW,WACPvC,EAAE,iBAAiBwC,SAAS,sBACxBC,aAAezC,EAAE,4CACrByC,aAAaC,KAAK,YAAY,GAC9B1C,EAAEO,UAAUoC,IAAI,SAAU,oBAAoBjC,GAAG,SAAU,oBAAoB,WAC3E+B,aAAaC,KAAK,YAAa1C,EAAEc,MAAMqB,GAAG,kBAE/C,QAGNS,OAAM,kBAKX5C,EAAE,cAAcU,GAAG,SAAS,SAASC,OACjCA,MAAMC,qBACFkC,WAAa9C,EAAEc,MAAMC,KAAK,UAC1BC,KAAOhB,EAAEc,MAAMC,KAAK,QACpBgC,SAAW/C,EAAEc,MAAMC,KAAK,YACxBI,OAASC,EAAEC,IAAIC,QAAU,6DAC3BN,KAAO,cAAgB+B,SACzBxB,QAAQC,IAAI,CACRpB,IAAIqB,WAAW,wBAAyB,4BAA6BqB,YACrE1C,IAAIqB,WAAW,eAAgB,6BAC/BrB,IAAIqB,WAAW,kBAAmB,6BAClCrB,IAAIqB,WAAW,SAAU,UACzBrB,IAAIqB,WAAW,SAAU,YAC1BC,MAAK,SAASC,aACTC,QAAUD,QAAQ,GAClBE,MAAQF,QAAQ,GAChBG,aAAeH,QAAQ,GACvBI,YAAcJ,QAAQ,GACtBK,YAAcL,QAAQ,GACtBM,aAAe,6EACjBH,aAAe,iBACjBzB,aAAa6B,QACTL,MACAD,QAAUK,aACVF,YACAC,aACA,WACoBhC,EAAE,kBAAkBmC,GAAG,cAEnChB,QAAU,YACViB,OAAOC,SAASC,KAAOnB,WAG/B,eAKJoB,YAAW,WACPvC,EAAE,iBAAiBwC,SAAS,sBACxBC,aAAezC,EAAE,4CACrByC,aAAaC,KAAK,YAAY,GAC9B1C,EAAEO,UAAUoC,IAAI,SAAU,kBAAkBjC,GAAG,SAAU,kBAAkB,WACvE+B,aAAaC,KAAK,YAAa1C,EAAEc,MAAMqB,GAAG,kBAE/C,QAGNS,OAAM,kBAKX5C,EAAE,wBAAwBU,GAAG,QAAS,oBAAoB,SAASC,OAC/DA,MAAMC,qBASFoC,cARAC,UAAYjD,EAAEc,MAAMC,KAAK,aACzBE,OAASjB,EAAEc,MAAMC,KAAK,UACtBG,OAASlB,EAAEc,MAAMC,KAAK,UACtBmC,UAAYlD,EAAEc,MAAMC,KAAK,aACzBS,KAAM,EACN2B,WAAa/B,EAAEgC,KAAK3B,WAAW,mBAAoB,6BACnD4B,eAAiBrD,EAAE,mBAAmBsD,MAG1ClD,IAAIqB,WAAW,yBAA0B,6BAA6BC,MAAK,SAAS6B,cAChFP,cAAgBO,MACTtD,aAAauD,OAAO,CACvBC,KAAMxD,aAAayD,MAAMC,QACzBC,KAAM,mGACN/B,MAAOsB,WACPU,OAAO,OAEZnC,MAAK,SAASoC,OACbA,MAAMC,OACN/D,EAAE,gBAAgB0C,KAAK,WAAW,OAC9BsB,mSAIUhB,qHAIdc,MAAMG,UAAUC,QAAQF,mBACjBF,SACRpC,MAAK,SAASoC,OACU,MAAnBT,eACAS,MAAMG,UAAUE,KAAK,uBAAuBJ,OAE5CD,MAAMG,UAAUE,KAAK,uBAAuBC,WAG5CC,YAAc,EACdC,WAAa,WAORC,WAAWC,MAChBxE,EAAEyE,KAAK,CACHC,IAAKtD,EAAEC,IAAIC,QAAU,sDACrBP,KAAM,CACFkC,UAAWA,UACX/B,OAAQA,OACRD,OAAQA,OACRO,IAAKA,IAAImD,WACTH,KAAMA,KACNI,QAlBE,IAoBNC,SAAU,OACVC,QAAS,SAASC,cACVC,OAASD,SAASC,OAAOC,KAAI,SAASC,aAC/B,CACHR,IAAKQ,MAAMC,IACXtD,MAAOqD,MAAMrD,MACbuD,KAAMF,MAAMG,YACZC,SAAUC,YAAYL,MAAMM,iBAGpClB,WAAaS,SAAST,eAElBvD,KAAO,CACP0E,YAAavC,UACb8B,OAAQA,OACRX,YAAaU,SAASV,YACtBC,WAAYS,SAAST,WACrBoB,YAAsC,IAAzBX,SAASV,YACtBsB,WAAYZ,SAASV,cAAgBU,SAAST,WAC9ClE,IAAK,SAASwF,YACHxE,EAAEgC,KAAK3B,WAAWmE,IAAK,+BAItC9B,MAAMG,UAAUE,KAAK,kBAAkB0B,KAAK,IAC5C1F,UAAU2F,OAAO,2CAA4C/E,MACxDgF,MAAK,SAASC,cACXlC,MAAMG,UAAUE,KAAK,kBAAkB0B,KAAKG,cAE5CvF,SAASH,WACL2F,kBAAoBnC,MAAMG,UAAUE,KAAK,eACzC+B,YAAcD,kBAAkBE,OAEpCnG,EAAE,eAAeU,GAAG,SAAS,SAASC,OAClCA,MAAMC,qBACFwF,MAAQH,kBAAkBG,MAAMpG,EAAEc,QACvB,IAAXsF,QAGJpG,EAAE,eAAeqG,MAAK,WACqB,IAAnCrG,EAAEc,MAAMwF,KAAK,WAAWH,QACxBnG,EAAEc,MAAMyF,MAAM,mCAGtBvG,EAAE,WAAWwG,KAAK,UAAYJ,MAAQ,GAAK,OAASF,aAGpDzF,SAASgG,MAAMzG,EAAEc,OACjBd,EAAE,sBAAsB2C,IAAI,SAASjC,GAAG,SAAS,SAASC,OACtDA,MAAMC,iBACFZ,EAAEc,MAAM4F,SAAS,WACjBN,OAASA,MAAQ,GAAKF,YACflG,EAAEc,MAAM4F,SAAS,aACxBN,OAASA,MAAQ,EAAIF,aAAeA,iBAEpCS,YAAcV,kBAAkBW,GAAGR,OAAOS,KAAK,QACnD7G,EAAE,aAAa6G,KAAK,MAAOF,aAC3B3G,EAAE,WAAWwG,KAAK,UAAYJ,MAAQ,GAAK,OAASF,oBAG5DlG,EAAE,eAAeU,GAAG,iBAAiB,WACjCV,EAAEc,MAAMwF,KAAK,gBAAgBlC,UAGjCpE,EAAE,gBAAgB0C,KAAK,UAAWlB,KAC9BwD,OAAOmB,OAAS,EAChBrC,MAAMG,UAAUE,KAAK,wBACpB0B,cAoCMxB,YAAaC,kBAMjC,mCAJc,IAAhBD,YAAoB,WAAa,IAI/B,2BAAkCA,YACnC,OAASC,WADR,+BAFFD,cAAgBC,WAAa,WAAa,IAExC,uBA1CmBwC,CAAsB/B,SAASV,YAAaU,SAAST,aAE3DR,MAAMG,UAAUE,KAAK,wBAAwB0B,KAAK,QAIlEkB,MAAO,SAASC,MAAOC,YACnBnD,MAAMG,UAAUE,KAAK,kBAAkB0B,KAAK,4BACtCoB,WAAa,oBAWtB1B,YAAY2B,eACTA,OAAOC,mBACN,mBACM,iBACN,gBACM,8BAEA,eAoBnBrD,MAAMsD,UAAU1G,GAAG,mBAAmB,WAClCV,EAAE,gBAAgB0C,KAAK,WAAW,MAGtCoB,MAAMG,UAAUvD,GAAG,SAAU,gBAAgB,WACzCc,IAAMxB,EAAEc,MAAMqB,GAAG,YACjBgB,WAAa3B,IAAMJ,EAAEgC,KAAK3B,WAAW,YAAa,6BAC/BL,EAAEgC,KAAK3B,WAAW,mBAAoB,6BACzDqC,MAAMuD,SAASlE,YACfoB,WAAWF,gBAGfP,MAAMG,UAAUtB,IAAI,QAAS,cAAcjC,GAAG,QAAS,cAAc,WAC7D2D,YAAc,GAEdE,aADAF,gBAKRP,MAAMG,UAAUtB,IAAI,QAAS,cAAcjC,GAAG,QAAS,cAAc,WAC7D2D,YAAcC,YAEdC,aADAF,gBAIRE,WAAWF,aAEXP,MAAMG,UAAUvD,GAAG,QAAS,UAAU,WAClCV,EAAE,gBAAgB0C,KAAK,WAAW,UAGlC4E,eAAgB,EACpBtH,EAAEO,UAAUG,GAAG,WAAW,SAASC,OACb,WAAdA,MAAMiF,KAAqB0B,gBAC3BA,eAAgB,EAE0B,UAAtCtH,EAAE,iBAAiBuH,IAAI,YAEvB9G,SAAS+G,WAEQ,IAAV1D,OAAyBA,MAAM2D,aACtC3D,MAAMM,OAEV7B,YAAW,KACP+E,eAAgB,IACjB,IACH3G,MAAM+G,kBACN1H,EAAE,gBAAgB0C,KAAK,WAAW,UAI3CE,OAAM,kBAKb5C,EAAE,wBAAwBU,GAAG,QAAS,oBAAoB,SAASC,OAC/DA,MAAMC,qBAEFqC,UAAYjD,EAAEc,MAAMC,KAAK,aACzBmC,UAAYlD,EAAEc,MAAMC,KAAK,aACzBoC,WAAa/B,EAAEgC,KAAK3B,WAAW,kBAAmB,6BAEtDxB,aAAauD,OAAO,CAChBC,KAAMxD,aAAayD,MAAMC,QACzBC,KAAM,mGACN/B,MAAOsB,WACPU,OAAO,IACRnC,MAAK,SAASoC,OACbA,MAAMC,WAGFM,YAAc,EACdC,WAAa,WAKRqD,sBACL7D,MAAMsD,UAAUjD,KAAK,SAASkC,MAAK,gBAC1BuB,aACAC,YAAc,cAuBlBC,WAAWtD,MAChBxE,EAAEyE,KAAK,CACHC,IAAKtD,EAAEC,IAAIC,QAAU,uDACrBP,KAAM,CACFkC,UAAWA,UACXuB,KAAMA,KACNI,QAvCE,IAyCNC,SAAU,OACVC,QAAS,SAASC,cACTA,WAAagD,MAAMC,QAAQjD,SAASkD,eACrCnE,MAAMG,UAAUE,KAAK,kBAAkB0B,KAAK,qCAC5C/B,MAAMG,UAAUE,KAAK,wBAAwB0B,KAAK,IAItDvB,WAAaS,SAAST,eAElB2D,OAASlD,SAASkD,OAAOhD,KAAI,SAASiD,aAC/B,CACHxD,IAAKwD,MAAMC,UACX/C,KAAM8C,MAAM7C,gBAIhBtE,KAAO,CACP0E,YAAavC,UACb+E,OAAQA,OACR5D,YAAaU,SAASV,YACtBC,WAAYS,SAAST,WACrBoB,YAAsC,IAAzBX,SAASV,YACtBsB,WAAYZ,SAASV,cAAgBU,SAAST,WAC9ClE,IAAK,SAASwF,YACHxE,EAAEgC,KAAK3B,WAAWmE,IAAK,+BAItC9B,MAAMG,UAAUE,KAAK,kBAAkB0B,KAAK,IAC5C1F,UAAU2F,OAAO,iDAAkD/E,MAC9DgF,MAAK,SAASC,cACXlC,MAAMG,UAAUE,KAAK,kBAAkB0B,KAAKG,cAE5ChG,EAAE,SAASU,GAAG,QAAQ,WAClBV,EAAE,SAASoI,IAAItH,MAAMuF,MAAK,gBACjBuB,aACAC,YAAc,QAIvBI,OAAO9B,OAAS,EAChBrC,MAAMG,UAAUE,KAAK,wBAChB0B,cAkBExB,YAAaC,kBAMjC,mCAJc,IAAhBD,YAAoB,WAAa,IAI/B,2BAAkCA,YAAc,OAASC,WAAzD,+BAFFD,cAAgBC,WAAa,WAAa,IAExC,uBAxBuBwC,CAAsB/B,SAASV,YAAaU,SAAST,aAE/DR,MAAMG,UAAUE,KAAK,wBAAwB0B,KAAK,QAIlEkB,MAAO,SAASC,MAAOC,YACnBnD,MAAMG,UAAUE,KAAK,kBAAkB0B,KAAK,4BAA8BoB,WAAa,kBA7EnGnD,MAAMsD,UAAU1G,GAAGR,YAAYmI,QAAQ,WACnCV,sBACA3H,EAAEO,UAAUoC,IAAI,gCAGpB3C,EAAEO,UAAUG,GAAG,6BAA6B,SAAS4H,GACnC,WAAVA,EAAE1C,KACF+B,yBAIR7D,MAAMsD,UAAU1G,GAAG,QAAS,0BAA0B,WAClDiH,yBAqFJ7D,MAAMG,UAAUtB,IAAI,QAAS,cAAcjC,GAAG,QAAS,cAAc,WAC7D2D,YAAc,GAEdyD,aADAzD,gBAKRP,MAAMG,UAAUtB,IAAI,QAAS,cAAcjC,GAAG,QAAS,cAAc,WAC7D2D,YAAcC,YAEdwD,aADAzD,gBAKRyD,WAAWzD,aACJP,SACRlB,OAAM,kBAKb5C,EAAE,wBAAwBU,GAAG,QAAS,oBAAoB,SAASC,OAC/DA,MAAMC,iBACNZ,EAAEyE,KAAK,CACHC,IAAKtD,EAAEC,IAAIC,QAAU,0DACrBP,KAAM,CACFkC,UAAWjD,EAAEc,MAAMC,KAAK,aACxBG,OAAQlB,EAAEc,MAAMC,KAAK,UACrBE,OAAQjB,EAAEc,MAAMC,KAAK,WAEzB8D,SAAU,OACVC,QAAS,SAASC,cACVwD,YAAcC,KAAKC,MAAMD,KAAKE,UAAU3D,kBACxCwD,YAAYzD,SACZ1C,OAAOuG,KAAKJ,YAAY7D,IAAK,WAa1B,GAXIzE,aAAauD,OAAO,CACvBC,KAAMxD,aAAayD,MAAMC,QACzBC,KAAM2E,YAAY3G,UACnBF,MAAK,SAASoC,cACbA,MAAMsD,UAAU1G,GAAGR,YAAYmI,OAAQvE,MAAM8E,QAAQC,KAAK/E,QAC1DA,MAAMC,OACC,QACRnB,OAAM,qBAUzB5C,EAAEO,UAAUG,GAAG,QAAS,qBAAqB,SAASC,OAClDA,MAAMC,iBACND,MAAM+G,sBACFoB,WAAa9I,EAAEc,MAAMC,KAAK,iBAC1B+H,WAAY,KAERC,kBAAoB/I,EAAE,SAASwG,KAAKsC,YAAYjD,cAC7C5F,aAAauD,OAAO,CACvBC,KAAMxD,aAAayD,MAAMC,QACzBC,KAAM,uCAAyCmF,kBAAoB,aACnElH,MAAO,uBACRH,MAAK,SAASoC,cACbA,MAAMsD,UAAU1G,GAAGR,YAAYmI,OAAQvE,MAAM8E,QAAQC,KAAK/E,QAC1DA,MAAMC,OACC,QACRnB,OAAM,mBAOjB5C,EAAE,wBAAwBU,GAAG,QAAS,aAAa,SAASC,OACxDA,MAAMC,uBAEAqC,UAAYjD,EAAEc,MAAMC,KAAK,aACzBE,OAASjB,EAAEc,MAAMC,KAAK,UACtBG,OAASlB,EAAEc,MAAMC,KAAK,UACtBF,SAAWmI,mBAAmBhJ,EAAEc,MAAMC,KAAK,aAE3C2D,IAAM,UAAGtD,EAAEC,IAAIC,mFACP2B,6BACHhC,0BACAC,4BACEL,UAEbuB,OAAOuG,KAAKjE,IAAK,aAIrB1E,EAAEO,UAAUG,GAAG,QAAS,eAAe,SAASC,OAC5CA,MAAMC,iBACND,MAAM+G,sBAGFuB,eADQjJ,EAAEc,MACa+F,KAAK,kBAE3BoC,oBAIDC,eAEAA,WAAaV,KAAKC,MAAMQ,gBAC1B,MAAOX,eAELlI,IAAIqB,WAAW,QAAS,UAAUmB,OAAM,iBAC7B,+BACRlB,MAAK,SAASyH,UACb9I,aAAa+I,gBAAgB,CACzBxH,QAASuH,SACT1F,KAAM,aAGXb,OAAM,eA4BbrB,QAAQC,IAAI,CACRpB,IAAIqB,WAAW,SAAU,6BACzBrB,IAAIqB,WAAW,QAAS,YACzBC,MAAK,SAASC,aACT0H,WAAa1H,QAAQ,GACrB2H,WAAa3H,QAAQ,YAQhB4H,WAAW/C,aACXA,KAGEgD,OAAOhD,MACTiD,QAAQ,KAAM,SACdA,QAAQ,KAAM,QACdA,QAAQ,KAAM,QACdA,QAAQ,KAAM,UACdA,QAAQ,KAAM,UAPR,YAsENC,uBACDC,aAAe3J,EAAE,gBACjB2J,aAAaxD,OAAS,IACtBwD,aAAaC,YAAY,QACzBrH,YAAW,WACPoH,aAAaE,SACb7J,EAAEO,UAAUoC,IAAI,yBACjB,UAKPmH,cAAgB9J,EAAE,gBAClB8J,cAAc3D,OAAS,IACvB2D,cAAcD,SACd7J,EAAEO,UAAUoC,IAAI,4BAzCId,MAAOkI,OACvBC,YA4CJC,WA7CoBpI,MA6COwH,WA5CvBW,YAAc,IADSD,OA6CYb,aA3CzBa,OAAO5D,OAAS,EAC1B4D,OAAOG,SAAQ,SAASC,OACpBH,sBAhCWG,WACfvI,QAAU2H,WAAWY,MAAMvI,SAAW,IACtCwD,KAAOmE,WAAWY,MAAM/E,MAAQ,IAChCgF,QAAUb,WAAWY,MAAMC,SAAW,IAEtCC,YAAc,UACdD,UACAC,YAAc,wDACqBD,QAC/B,UAGD,0BACHC,YADG,yDAG6BzI,QAH7B,iCAI0BwD,KAJ1B,qBAoBgBkF,CAAcH,UAGjCH,YAAc,2CAGX,gJAGiCT,WAAW1H,OAH5C,+DAIyD0H,WAAWD,YAJpE,0FAQiCU,YARjC,sBAoCXhK,EAAE,QAAQuK,OAAON,eAGbnG,MAAQ9D,EAAE,gBACduC,YAAW,WACPuB,MAAMtB,SAAS,UAChB,IAGHsB,MAAMpD,GAAG,QAAS,iBAAiB,WAC/BgJ,sBAIJ5F,MAAMpD,GAAG,SAAS,SAAS4H,GACnBtI,EAAEsI,EAAEkC,QAAQrI,GAAG,iBACfuH,sBAKR1J,EAAEO,UAAUG,GAAG,uBAAuB,SAAS4H,GAC7B,WAAVA,EAAE1C,KAAoB9B,MAAM3B,GAAG,aAC/BuH,yBAKT9G,OAAM,kBAtJExC,IAAIqB,WAAW,QAAS,UAC1BC,MAAK,SAASyH,UACX9I,aAAa+I,gBAAgB,CACzBxH,QAASuH,SACT1F,KAAM,aAIbb,OAAM,WACHvC,aAAa+I,gBAAgB,CACzBxH,QAAS,uBACT6B,KAAM,oBAiJ1BzD,EAAE,wBAAwBU,GAAG,QAAS,cAAc,SAASC,OACzDA,MAAMC,iBACND,MAAM+G,wBAEA+C,UAAYzK,EAAEc,MAAMqD,KAAK,0BACzBuG,aAAeD,UAAUtI,GAAG,YAE5BwI,QAAU3K,EAAEc,MACZE,KAAO2J,QAAQ5J,KAAK,QACpBkC,UAAY0H,QAAQ5J,KAAK,aACzBG,OAASyJ,QAAQ5J,KAAK,UACtB6J,UAAYD,QAAQ5J,KAAK,aACzB8J,OAASF,QAAQ5J,KAAK,mBAUnB+J,4BACE1K,IAAIqB,WAAW,cAAe,6BAChCC,MAAK,SAAS8E,MACXnG,aAAa+I,gBAAgB,CACzBxH,QAAS4E,KACT/C,KAAM,aAIbb,OAAM,WACHvC,aAAa+I,gBAAgB,CACzBxH,QAAS,iBACT6B,KAAM,sBA0CbsH,uBAAuBC,uBACtBC,WAAwB,YAAXJ,OAAuB,4BAA8B,2BACxEtJ,QAAQC,IAAI,CACRpB,IAAIqB,WAAWwJ,WAAY,4BAA6BL,WACxDxK,IAAIqB,WAAW,+BAAgC,6BAC/CrB,IAAIqB,WAAW,MAAO,UACtBrB,IAAIqB,WAAW,SAAU,YAC1BC,MAAK,SAASC,eACPC,QAAUD,QAAQ,GAClBuJ,aAAevJ,QAAQ,GACvBwJ,aAAexJ,QAAQ,GACvBK,YAAcL,QAAQ,GAEtBM,oKAEkD+I,gBAC5C,UAAY,kJAEVE,yHAKd7K,aAAa6B,QACT,GACAN,QAAUK,aACVkJ,aACAnJ,aACA,iBACUoJ,UAAYpL,EAAE,sBAAsBmC,GAAG,YAAc,EAAI,MA7DnDkJ,eAAAA,eA8DOD,UA7D/BpL,EAAEyE,KAAK,CACHC,IAAKtD,EAAEC,IAAIC,QAAU,yDACrBgK,OAAQ,OACRvK,KAAM,CACFC,KAAMA,KACNiC,UAAWA,UACX/B,OAAQA,OACR2J,OAAQA,OACRU,UAAWF,gBAEfxG,SAAU,OACVC,QAAS,SAASC,UACVA,SAASD,eACiC,IAA/B1C,OAAOoJ,qBACdpJ,OAAOoJ,0BACoC,IAApCpJ,OAAOoJ,oBAAoB/G,MACgB,mBAA3CrC,OAAOoJ,oBAAoB/G,KAAKgH,OACvCrJ,OAAOoJ,oBAAoB/G,KAAKgH,OAAO,MAAM,GAE7CrJ,OAAOC,SAASoJ,WAI5B1E,MAAO+D,wBAwCH,kBAKLlI,OAAM,WACLvC,aAAa+I,gBAAgB,CACzBxH,QAAS,oCACT6B,KAAM,aAtGlBlB,YAAW,WACPkI,UAAU/H,KAAK,UAAWgI,gBAC3B,GA2GH1K,EAAEyE,KAAK,CACHC,IAAKtD,EAAEC,IAAIC,QAAU,yDACrBgK,OAAQ,OACRvK,KAAM,CACFC,KAAMA,KACNiC,UAAWA,UACX/B,OAAQA,OACR2J,OAAQ,iBAEZhG,SAAU,OACVC,QAAS,SAAS4G,cAIdX,uBAHyD,OAAlCW,aAAaC,uBACmBC,IAAlCF,aAAaC,mBAItC5E,MAAO,WACHgE,wBAAuB"}